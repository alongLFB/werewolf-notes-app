# 新增角色：骑士、黑狼王、白狼王

## 🆕 新增角色概览

### ⚔️ 骑士 (Knight)

- **阵营**: 好人阵营
- **技能**: 决斗
- **描述**: 白天可以与玩家决斗：杀死狼人则狼人出局，杀死好人则自己死亡
- **特点**:
  - 属于好人阵营的强力角色
  - 具有主动进攻能力
  - 需要准确判断才能发挥作用
- **夜间行动**: 无

### 👑 黑狼王 (Dark Wolf King)

- **阵营**: 狼人阵营
- **技能**: 复仇带人
- **描述**: 被投票出局时可以选择带走一个玩家
- **特点**:
  - 属于狼人阵营的特殊狼人
  - 夜晚可以像普通狼人一样击杀
  - 被投票出局时有复仇能力
- **夜间行动**: 击杀 (与普通狼人相同)

### 💀 白狼王 (White Wolf King)

- **阵营**: 狼人阵营
- **技能**: 自爆带人
- **描述**: 可以在白天自爆并带走一个玩家
- **特点**:
  - 属于狼人阵营的特殊狼人
  - 夜晚可以像普通狼人一样击杀
  - 白天可以主动自爆带人
- **夜间行动**: 击杀 (与普通狼人相同)

## 🎮 角色机制详解

### 骑士决斗机制

1. **触发时机**: 白天任意时刻
2. **决斗规则**:
   - 决斗好人 → 骑士死亡，目标存活
   - 决斗狼人 → 狼人死亡，骑士存活
3. **死亡原因**: `knight_duel`
4. **战术价值**: 可以通过决斗验证身份，但风险较高

### 黑狼王复仇机制

1. **触发时机**: 被投票出局时
2. **复仇规则**:
   - 选择任意存活玩家带走
   - 可以选择不带人
3. **死亡原因**: `dark_wolf_king_revenge`
4. **战术价值**: 增加投票黑狼王的风险，保护狼队

### 白狼王自爆机制

1. **触发时机**: 白天任意时刻主动触发
2. **自爆规则**:
   - 白狼王立即死亡
   - 选择任意存活玩家带走
3. **死亡原因**: `white_wolf_king_explosion`
4. **战术价值**: 可以在关键时刻打破僵局

## 💻 技术实现

### 类型定义更新

```typescript
// 新增角色类型
export type RoleType =
  | "knight" // 骑士
  | "dark_wolf_king" // 黑狼王
  | "white_wolf_king"; // 白狼王
// ... 其他角色

// 新增死亡原因
export type DeathReason =
  | "knight_duel" // 骑士决斗
  | "dark_wolf_king_revenge" // 黑狼王复仇
  | "white_wolf_king_explosion"; // 白狼王自爆
// ... 其他死亡原因
```

### 夜间行动支持

```typescript
// 狼王们在夜晚可以像普通狼人一样击杀
case "werewolf":
case "dark_wolf_king":
case "white_wolf_king":
  return [{ value: "werewolf_kill", label: "击杀" }];
```

### 角色配置

```typescript
knight: {
  type: "knight",
  name: "骑士",
  description: "白天可以与玩家决斗：杀死狼人则狼人出局，杀死好人则自己死亡",
  camp: "villagers",
  color: "bg-indigo-600 text-white",
},
dark_wolf_king: {
  type: "dark_wolf_king",
  name: "黑狼王",
  description: "被投票出局时可以选择带走一个玩家",
  camp: "werewolves",
  color: "bg-gray-800 text-white",
},
white_wolf_king: {
  type: "white_wolf_king",
  name: "白狼王",
  description: "可以在白天自爆并带走一个玩家",
  camp: "werewolves",
  color: "bg-slate-600 text-white",
}
```

## 🎯 游戏平衡性

### 阵营分布影响

- **骑士**: 增强好人阵营的主动能力
- **黑狼王**: 增加投票的风险成本
- **白狼王**: 提供狼队的灵活战术选择

### 建议配置

- **小局 (9-10 人)**: 不建议同时加入多个新角色
- **大局 (12+人)**: 可以适当加入增加游戏复杂度

### 技能互动

- 骑士决斗 vs 狼王：增加身份验证的复杂性
- 黑狼王复仇 vs 白狼王自爆：不同的带人时机和条件
- 与现有角色的配合：女巫、猎人等带人技能的优先级问题

## 🚀 后续开发计划

### 白天技能系统

1. **骑士决斗面板**: 实现白天决斗功能
2. **白狼王自爆面板**: 实现自爆带人功能
3. **黑狼王复仇逻辑**: 在投票结算时触发复仇选择

### 游戏流程增强

1. **特殊死亡结算**: 处理决斗、自爆、复仇的死亡逻辑
2. **技能优先级**: 多个带人技能同时触发时的处理顺序
3. **胜利条件检测**: 新角色对胜负判定的影响

现在系统已经支持骑士、黑狼王、白狼王三个新角色的基础定义和夜间行动，为后续实现白天特殊技能奠定了基础！
